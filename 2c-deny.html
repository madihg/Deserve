<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deserve it</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: "Courier New", Courier, monospace;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }
        h1 {
            font-family: 'Merriweather', serif;
            font-weight: normal;
            text-align: center;
            width: 100%;
        }
        h2, h3 {
            font-family: 'Merriweather', serif;
            font-weight: normal;
        }
        .progress-container {
            display: flex;
            align-items: center;
            width: 80%;
            margin: 20px auto;
            position: relative;
            justify-content: center;
        }
        .progress-bar-wrapper {
            display: flex;
            justify-content: center;
            width: 100%;
        }
        .progress-bar {
            display: flex;
            justify-content: space-between;
            width: 860px;  /* Match the width of the rectangle */
            background-color: white;
            padding: 10px;
            border: 1px solid #000;
        }
        .progress-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 20%;
            z-index: 1;
        }
        .progress-dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1px solid black;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }
        .progress-dot.checked {
            background-color: white;
        }
        .progress-dot.checked::after {
            content: 'x';
        }
        .progress-text {
            color: gray;
            margin-top: 5px;
        }
        .progress-text.active {
            color: black;
        }
        .question-container {
            margin-top: 40px;
            text-align: left;
            width: 860px;
            margin: 40px auto 0;
        }
        .floating-rectangle {
            position: relative;
            width: 100%;
            height: 400px;
            border: 1px solid black;
            margin-top: 20px;
        }
        .floating-checkbox {
            position: absolute;
            transition: top 2s ease-out, left 2s ease-out;
            z-index: 1;
        }
        .buttons {
            display: none;
            margin-top: 20px;
            text-align: center;
            margin-top: 20px; /* Ensure it appears below the rectangle */
        }
        .submit-button {
            margin: 0 10px;
            background-color: black;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1em;
            font-family: 'Courier New', Courier, monospace;
            cursor: pointer;
        }
        .submit-button:hover {
            background-color: grey;
        }
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 2px solid black;
            z-index: 1000;
            text-align: center;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
    </style>
</head>
<body>
    <div class="progress-container">
        <h1>(DS-160) Immigration i-765/485 EAD N400 Application Form</h1>
    </div>
    <div class="progress-bar-wrapper">
        <div class="progress-bar">
            <div class="progress-stage">
                <div class="progress-dot checked" id="stage1-dot"></div>
                <div class="progress-text active" id="stage1-text">Depart</div>
            </div>
            <div class="progress-stage">
                <div class="progress-dot checked" id="stage2-dot"></div>
                <div class="progress-text active" id="stage2-text">Section 2</div>
            </div>
            <div class="progress-stage">
                <div class="progress-dot" id="stage3-dot"></div>
                <div class="progress-text" id="stage3-text">Section 3</div>
            </div>
            <div class="progress-stage">
                <div class="progress-dot" id="stage4-dot"></div>
                <div class="progress-text" id="stage4-text">Section 4</div>
            </div>
            <div class="progress-stage">
                <div class="progress-dot" id="stage5-dot"></div>
                <div class="progress-text" id="stage5-text">Section 5</div>
            </div>
        </div>
    </div>
    <div class="question-container">
        <h3 id="question">Question 1: Have you ever attempted to do anything remotely unlawful to access this country?</h3>
        <div class="floating-rectangle" id="floating-rectangle"></div>
    </div>
    <div class="buttons" id="buttons">
        <button class="submit-button" onclick="openNewPage()">Submit</button>
        <button class="submit-button" onclick="openNewPage2()">Save</button>
        <button class="submit-button" onclick="openNewPage3()">Stray</button>
    </div>
    <div class="modal" id="modal">
        <p>Your application is under review. Further action may be required.</p>
        <button class="submit-button" onclick="closeModal()">I made a mistake</button>
    </div>
    <div class="overlay" id="overlay"></div>
    <script>
        const questions = [
            "Have you ever been a member or served in an insurgent organization (a group that uses weapons and fights against a government)?",
            "Have you ever been a worker, volunteer, or soldier, or did you otherwise ever serve in any prison or jail?",
            "Have you ever been a worker, volunteer, or soldier, or did you otherwise ever serve in any prison camp?",
            "Have you ever been a worker, volunteer, or soldier, or did you otherwise ever serve in any detention facility?",
            "Have you ever been a worker, volunteer, or soldier, or did you otherwise ever serve in any labor camp?",
            "Have you ever been a worker, volunteer, or soldier, or did you otherwise ever serve in any other place where people were forced to stay?",
            "Have you ever been part of any group, or did you ever help any group, unit, or organization that used a weapon against any person or threatened to do so?",
            "When you were part of or helped this group, did you ever use a weapon against another person?",
            "When you were part of or helped this group, did you ever tell another person that they would use a weapon against that person?",
        ];

        let currentQuestionIndex = 0;

        document.addEventListener('click', (event) => {
            if (event.target && event.target.type === 'checkbox') {
                if (event.target.nextSibling.textContent.trim() === 'No') {
                    handleNoClick();
                } else {
                    showModal();
                }
            }
        });

        function handleNoClick() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                document.getElementById('question').textContent = `Question ${currentQuestionIndex + 1}: ${questions[currentQuestionIndex]}`;
                createFloatingCheckboxes();
            } else {
                document.getElementById('buttons').style.display = 'block';
            }
        }

        function createFloatingCheckboxes() {
            const container = document.getElementById('floating-rectangle');

            for (let i = 0; i < 4; i++) {
                createFloatingCheckbox('Yes', container);
            }
            createFloatingCheckbox('No', container);
        }

        function createFloatingCheckbox(labelText, container) {
            const label = document.createElement('label');
            label.classList.add('floating-checkbox');
            label.style.top = `${Math.random() * (container.clientHeight - 20)}px`;
            label.style.left = `${Math.random() * (container.clientWidth - 20)}px`;

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';

            const text = document.createTextNode(` ${labelText}`);

            label.appendChild(checkbox);
            label.appendChild(text);

            container.appendChild(label);
        }

        function floatElements(selector, interval) {
            setInterval(() => {
                document.querySelectorAll(selector).forEach(element => {
                    const container = document.getElementById('floating-rectangle');
                    element.style.top = `${Math.random() * (container.clientHeight - element.offsetHeight)}px`;
                    element.style.left = `${Math.random() * (container.clientWidth - element.offsetWidth)}px`;
                });
            }, interval);
        }

        function openNewPage() {
            window.open('3c-erase.html', '_blank');
        }

        function openNewPage2() {
            window.open('3a-jukebox.html', '_blank');
        }

        function openNewPage3() {
            window.open('https://deserve-it-3-checkboard.glitch.me/', '_blank');
        }

        function showModal() {
            document.getElementById('modal').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        window.onload = () => {
            createFloatingCheckboxes();
            floatElements('.floating-checkbox', 3000);
        };
    </script>
</body>
</html>
